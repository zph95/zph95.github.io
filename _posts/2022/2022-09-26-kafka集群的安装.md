---
layout: post
title:  "kafka集群的安装"
date:   2022-09-26 14:30:00 +0800
categories: java
typora-root-url: ..
---

# kafka集群的安装

1、 将Kafka的安装包上传到虚拟机，并解压
cd /export/software/

tar -xvzf kafka_2.11-2.2.1.tgz -C ../server/

cd /export/server/kafka_2.12-2.4.1/


2、配置文件修改



## 启动脚本
start.sh

```bash
#!/bin/bash

# start zookeeper
ps -ef |grep "zookeeper.properties" |grep -v grep 2>&1 >/dev/null
if [ $? -eq 0 ];then
        echo "OK"
else
        nohup ../kafka_2.11-2.2.1/bin/zookeeper-server-start.sh -daemon ../kafka_2.11-2.2.1/config/zookeeper.properties
fi

# start kafka
ps -ef |grep "server.properties" |grep -v grep 2>&1 >/dev/null
if [ $? -eq 0 ];then
        echo "OK"
else
        nohup ../kafka_2.11-2.2.1/bin/kafka-server-start.sh -daemon ../kafka_2.11-2.2.1/config/server.properties
fi
```

### 停止脚步
stop.sh
```bash
#!/bin/bash

# stop zookeeper
ps -ef |grep "zookeeper.properties" |grep -v grep 2>&1 >/dev/null
if [ $? -eq 0 ];then
        nohup ../kafka_2.11-2.2.1/bin/zookeeper-server-stop.sh -daemon ../kafka_2.11-2.2.1/config/zookeeper.properties
else
        echo "OK"
fi

# stop kafka
ps -ef |grep "server.properties" |grep -v grep 2>&1 >/dev/null
if [ $? -eq 0 ];then
        nohup ../kafka_2.11-2.2.1/bin/kafka-server-stop.sh -daemon ../kafka_2.11-2.2.1/config/server.properties
else
        echo "OK"
fi
```

### 创建topic

```bash
#!/bin/bash 
 
topic_name=$1 
 
[ -z "${topic_name}" ] && echo "$0 <topic_name>" && exit 1 
 
export  BootStrapServer="ip:9092,ip:9092,ip:9092" 
# create topic 
../kafka_2.11-2.2.1/bin/kafka-topics.sh --bootstrap-server ${BootStrapServer} --create  --replication-factor 2 --partitions 2 --topic ${topic_name} 
# describe topic 
../kafka_2.11-2.2.1/bin/kafka-topics.sh --bootstrap-server ${BootStrapServer}  --describe --topic ${topic_name} 
```